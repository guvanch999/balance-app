# Распределенный планировщик задач

Система для распределенного выполнения периодических задач между несколькими серверами с использованием Node.js, Redis и PostgreSQL.

## Основные возможности

- Распределение задач между несколькими серверами
- Отслеживание статуса выполнения задач
- Предотвращение одновременного выполнения одной задачи на разных серверах
- Сохранение истории выполнения задач
- Настраиваемые интервалы выполнения через cron-выражения

## Технологический стек

- Node.js
- PostgreSQL (через Sequelize ORM)
- Redis (для блокировок)
- node-cron (для планирования задач)


## Установка и запуск

1. Клонируйте репозиторий
2. Установите зависимости: `npm install`
3. Настройте переменные окружения в файле `.env`
4. Выполните миграции базы данных
5. Запустите сервер: `npm start`

## Переменные окружения

- **REDIS_URL**: URL подключения к Redis (например: redis://localhost:6379)
- **SERVER_ID**: Уникальный идентификатор сервера (например: server1)
- **PORT**: Порт для запуска сервера (например: 3000)
- **DB_HOST**: Хост базы данных PostgreSQL (например: localhost)
- **DB_PORT**: Порт базы данных PostgreSQL (например: 5432)
- **DB_USER**: Имя пользователя PostgreSQL (например: postgres)
- **DB_PASSWORD**: Пароль пользователя PostgreSQL (например: password)
- **DB_NAME**: Название базы данных PostgreSQL (например: mydb)



## Принцип работы

1. При старте сервера загружаются все задачи из базы данных
2. Для каждой задачи создается cron-job
3. Перед выполнением задачи происходит блокировка через Redis
4. Создается запись в истории выполнения
5. После завершения задачи блокировка снимается
